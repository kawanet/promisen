<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: promisen</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: promisen</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">promisen.js creates promise-returning functions. ready for ES6 Promise.</div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-copyright">Copyright:</dt>
    <dd class="tag-copyright"><ul class="dummy"><li>Yusuke Kawasaki</li></ul></dd>
    

    
    <dt class="tag-license">License:</dt>
    <dd class="tag-license"><ul class="dummy"><li>MIT</li></ul></dd>
    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://github.com/kawanet/promisen">https://github.com/kawanet/promisen</a></li>
        
            <li><a href="http://kawanet.github.io/promisen/module-promisen.html">http://kawanet.github.io/promisen/module-promisen.html</a></li>
        </ul>
    </dd>
    

    
</dl>
















        
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".Promise"><span class="type-signature">(static) </span>Promise<span class="type-signature"> :Promise</span></h4>




<div class="description">
    Native Promise object or Promise polyfill.
"es6-promise" polyfill loaded per default in case no native Promise object ready.
Some other libraries which have compatible interface with ES6 Promise are also available:
Q, bluebird and RSVP are tested.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Promise</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

// https://github.com/jakearchibald/es6-promise (default polyfill)
promisen.Promise = require("es6-promise").Promise;

// https://github.com/kriskowal/q
promisen.Promise = require("q").Promise;

// https://github.com/petkaantonov/bluebird
promisen.Promise = require("bluebird").Promise;

// https://github.com/tildeio/rsvp.js
promisen.Promise = require("rsvp").Promise;

// https://github.com/calvinmetcalf/lie
promisen.Promise = require("lie");

// https://github.com/RubenVerborgh/promiscuous
promisen.Promise = require("promiscuous");</code></pre>



        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id=".decr"><span class="type-signature">(static) </span>decr<span class="signature">(array)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which decrements a counter on top of stack.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>array</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last">counter holder</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var counter = [123];
console.log("count: " + counter); // => count: 123

var decrTask = counter.decr();
decrTask().then(function(value) {...}); // => count: 122

// decrTask is available in a series of tasks.
var task = promisen(otherTask, decrTask);</code></pre>



        
            

    

    <h4 class="name" id=".denodeify"><span class="type-signature">(static) </span>denodeify<span class="signature">(task)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function from a Node.js-style function which requests a callback function at the last argument.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">Node.js-style function</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");
var fs = require("fs");

// you should bind target object with the task
var readFile = promisen.denodeify(fs.readFile.bind(fs));

// readFile() is now available as a promise-returning function
readFile("README.md", "utf-8").then(function(value) {...}).catch(function(reason) {...});</code></pre>



        
            

    

    <h4 class="name" id=".each"><span class="type-signature">(static) </span>each<span class="signature">(arrayTask, iteratorTask)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which runs task repeatedly for each value of array in parallel.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>arrayTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>


            
            </td>

            

            

            <td class="description last">array or task returns array for iteration</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>iteratorTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">task runs repeatedly for each of array values</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var task = promisen.each([2, 4, 6], div2);

task.call(target).then(function(array) {...}); // => [1, 2, 3]

function div2(value) {
  return value / 2;
}</code></pre>



        
            

    

    <h4 class="name" id=".eachSeries"><span class="type-signature">(static) </span>eachSeries<span class="signature">(arrayTask, iteratorTask)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which runs task repeatedly for each value of array in order.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>arrayTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>


            
            </td>

            

            

            <td class="description last">array or task returns array for iteration</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>iteratorTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">task runs repeatedly for each of array values</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var task = promisen.eachSeries([1, 2, 3], mul2);

task.call(target).then(function(array) {...}); // => [2, 4, 6]

function mul2(value) {
  return value * 2;
}</code></pre>



        
            

    

    <h4 class="name" id=".if"><span class="type-signature">(static) </span>if<span class="signature">(condTask<span class="signature-attributes">opt</span>, trueTask<span class="signature-attributes">opt</span>, falseTask<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which runs a task assigned by a conditional task.

When null or undefined is given as a task, it will do nothing for value and just passes it.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>condTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>
|

<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>
|

<span class="param-type">*</span>
|

<span class="param-type">null</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">boolean or function returns boolean</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>trueTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>
|

<span class="param-type">*</span>
|

<span class="param-type">null</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">task runs when true</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>falseTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>
|

<span class="param-type">*</span>
|

<span class="param-type">null</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">task runs when false</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

// generate a promise-returning function
var task = promisen.if(condTask, trueTask, falseTask);

// execute itl[pi?K  jk ln lml;/,   m /P/.[h
task().then(function(result) {...});

// execute it with target object which is passed to every tasks
task.call(target).then(function(result) {...});

// all three arguments are optional.
var runWhenTrueTask = promisen.if(null, trueTask);
Promise.resolve(value).then(runWhenTrueTask).then(function(result) {...});

// conditional task are also available in a waterfall of promisen tasks
var joined = promisen(task1, runWhenTrueTask, task2);
joined().then(function(result) {...});

// use uglify --compress (or UPPERCASE property name) for IE8
var task = promisen["if"](condTask, trueTask, falseTask);
var task = promisen.IF(condTask, trueTask, falseTask);</code></pre>



        
            

    

    <h4 class="name" id=".incr"><span class="type-signature">(static) </span>incr<span class="signature">(array)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which increments a counter on top of stack.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>array</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last">counter holder</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var counter = [123];
console.log("count: " + counter); // => count: 123

var incrTask = counter.incr();
incrTask().then(function(value) {...}); // => count: 124

// incrTask is available in a series of tasks.
var task = promisen(otherTask, incrTask);</code></pre>



        
            

    

    <h4 class="name" id=".log"><span class="type-signature">(static) </span>log<span class="signature">(prefix<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which inspects value to console.log() for debug purpose.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>prefix</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var task3 = promisen(task1, promisen.log("result:"), task2);

task3().then(function() {...});</code></pre>



        
            

    

    <h4 class="name" id=".memoize"><span class="type-signature">(static) </span>memoize<span class="signature">(task, expire, hasher<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which caches a result of task.

The cache of result is exposed as the memo property of the function returned by memoize.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">task to wrap</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>expire</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">millisecond until cache expired</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hasher</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">default: JSON.stringify()</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");
var request = require("request");

var ajaxGet = promisen.denodeify(request);
var cachedAjax = promisen.memoize(ajaxGet);

var req = {url: "http://www.example.com/"};
cachedAjax(req).then(function(res) {...}); // res.body contains response body</code></pre>



        
            

    

    <h4 class="name" id=".nodeify"><span class="type-signature">(static) </span>nodeify<span class="signature">(task)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a Node.js-style function from a promise-returning function or any object.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>
|

<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last">promise-returning function or any object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Node.js-style function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var task = nodeify(func);

task(value, function(err, res) {...});

function func(value) {
  return new Promise(function(resolve, reject) {...});
}</code></pre>



        
            

    

    <h4 class="name" id=".parallel"><span class="type-signature">(static) </span>parallel<span class="signature">(tasks)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which runs multiple tasks in parallel.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tasks</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last">list of tasks</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

// generate a promise-returning function
var task = promisen.parallel([task1, task2, task3,...]);

// execute it
task(value).then(function(array) {...}); // array of results

// execute it with target object which is passed to every tasks
task.call(target, value).then(function(result) {...});</code></pre>



        
            

    

    <h4 class="name" id=".pop"><span class="type-signature">(static) </span>pop<span class="signature">(array)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which fetches the last value on the array.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>array</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var stack = ["foo", "bar"]; // stack is an array

var task2 = promisen(promisen.pop(stack), task1);

task2().then(function() {...}); // stack.length == 1</code></pre>



        
            

    

    <h4 class="name" id=".promisen"><span class="type-signature">(static) </span>promisen<span class="signature">(&hellip;task)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function from plain function or objects below:

1. function
2. promise object
3. thenable object
4. any other constant object or value
5. multiple values of above
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>
|

<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/es6-promise">https://www.npmjs.com/package/es6-promise</a></li>
        
            <li>promisen.waterfall()</li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

// wrap a single function
var wrapped = promisen(function() {...});
wrapped(value).then(function(result) {...});

// composite multiple tasks
var joined = promisen(func, promise, thenable, object);
joined(value).then(function(result) {...});</code></pre>



        
            

    

    <h4 class="name" id=".push"><span class="type-signature">(static) </span>push<span class="signature">(array)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which inspects the last value on the array.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>array</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var stack = ["foo", "bar"]; // stack is an array

var task2 = promisen(promisen.top(stack), task1);

task2().then(function() {...}); // stack.length == 2</code></pre>



        
            

    

    <h4 class="name" id=".push"><span class="type-signature">(static) </span>push<span class="signature">(array)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which stores a value into the array.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>array</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var stack = []; // stack is an array

var task2 = promisen(task1, promisen.push(stack));

task2().then(function() {...}); // stack.length == 2</code></pre>



        
            

    

    <h4 class="name" id=".series"><span class="type-signature">(static) </span>series<span class="signature">(tasks)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which runs multiple tasks in order.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tasks</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last">list of tasks</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

// generate a promise-returning function
var task = promisen.series([task1, task2, task3,...]);

// execute it
task(value).then(function(array) {...}); // array of results

// execute it with target object which is passed to every tasks
task.call(target, value).then(function(result) {...});</code></pre>



        
            

    

    <h4 class="name" id=".throttle"><span class="type-signature">(static) </span>throttle<span class="signature">(task, concurrency, timeout)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which limits number of concurrent job workers run in parallel.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">the job</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>concurrency</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">number of job workers run in parallel (default: 1)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>timeout</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">timeout in millisecond until job started (default: no timeout)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var serialAjaxTask = promisen.single(ajaxTask, 10000, 1); // 10 seconds, 1 worker

serialAjaxTask(req).then(function(res) {...});</code></pre>



        
            

    

    <h4 class="name" id=".timeout"><span class="type-signature">(static) </span>timeout<span class="signature">(task, msec)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which has timeout detection until job done.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>task</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">the job</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msec</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">timeout in millisecond until job done (default: no timeout)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id=".wait"><span class="type-signature">(static) </span>wait<span class="signature">(msec)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which does just sleep for given milliseconds.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>msec</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var sleep = promisen.wait(1000); // 1 sec
sleep(value).then(function(value) {...});

// similar to below
setTimeout(function() {...}, 1000);</code></pre>



        
            

    

    <h4 class="name" id=".warn"><span class="type-signature">(static) </span>warn<span class="signature">(prefix<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which inspects value to console.warn() for debug purpose.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>prefix</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

var task3 = promisen(task1, promisen.warn("result:"), task2);

task3().then(function() {...});</code></pre>



        
            

    

    <h4 class="name" id=".waterfall"><span class="type-signature">(static) </span>waterfall<span class="signature">(tasks)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which runs multiple tasks in order.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tasks</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>
|

<span class="param-type">Array-like</span>


            
            </td>

            

            

            <td class="description last">list of tasks</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

// generate a promise-returning function
var task = promisen.waterfall([task1, task2, task3,...]);

// execute it
task(value).then(function(result) {...});

// execute it with target object which is passed to every tasks
task.call(target, value).then(function(result) {...});</code></pre>



        
            

    

    <h4 class="name" id=".while"><span class="type-signature">(static) </span>while<span class="signature">(condTask, &hellip;runTask)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    creates a promise-returning function which runs a task repeatedly while the condition is true.

When null or undefined is given as condTask, it will do nothing for value and just passes it.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>condTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>
|

<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>
|

<span class="param-type">*</span>
|

<span class="param-type">null</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">boolean or function returns boolean</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>runTask</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>
|

<span class="param-type">Promise</span>
|

<span class="param-type">thenable</span>
|

<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">task runs while true</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise-returning function
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var promisen = require("promisen");

// counter = 8; while (--counter) { runTask }
var counter = promisen.number(8);
var whileTask = promisen.while(counter.decr, runTask);

// for (initTask; condTask; afterTask) { runTask }
var forTask = promisen(initTask, promisen.while(condTask, runTask, afterTask));

// do { runTask } while (condTask)
var doWhileTask = promisen.while(null, runTask, condTask));</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-promisen.html">promisen</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
