!function(n,r){function t(n){function r(){return t.Promise.resolve(n)}function o(r){return t.Promise.resolve(n.call(this,r))}return arguments.length>1?u(arguments):n instanceof Function?o:null==n?e:arguments.length?r:e}function e(n){return t.Promise.resolve(n)}function o(n){return t.Promise.reject(n)}function u(n){function r(r){return n.reduce(u.bind(this),e(r))}function o(n){return null!=n&&t(n)}function u(n,r){return r?n.then(r.bind(this)):n}return null===n?t(n):null==n?t():(n=Array.prototype.map.call(n,o),r)}function i(n){function r(n){return u([m(e),n,h(o)])}if(null==n)return t([]);var e=[],o=[];return n=Array.prototype.map.call(n,r),n=u(n),u([h(e),n,o])}function l(n){function r(r){var e=Array.prototype.map.call(n,o.bind(this,r));return t.Promise.all(e)}function e(n){return t(n)}function o(n,r){return r.call(this,n)}return null==n?t([]):(n=Array.prototype.map.call(n,e),r)}function c(n,r,e){function o(t){function o(n){return n?i():l()}var u=n.bind(this,t),i=r.bind(this,t),l=e.bind(this,t);return u().then(o)}return n=null!=n?t(n):t(),r=null!=r?t(r):t(),e=null!=e?t(e):t(),o}function a(n,r){function e(n){return i.call(this,n)}n=null!=n?t(n):t();var o=Array.prototype.slice.call(arguments,1);o.push(e),r=u(o);var i=c(n,r);return i}function f(n,r){function e(n){return n=Array.prototype.map.call(n,o),i(n).call(this)}function o(n){return u([n,r])}n=null!=n?t(n):t();var l=Array.prototype.slice.call(arguments,1);return r=u(l),u([n,e])}function s(n,r){function e(n){return n=Array.prototype.map.call(n,o),l(n).call(this)}function o(n){return u([n,r])}n=null!=n?t(n):t();var i=Array.prototype.slice.call(arguments,1);return r=u(i),u([n,e])}function p(n){function r(){return n.length||Array.prototype.push.call(n,0),e(++n[n.length-1])}return r}function d(n){function r(){return n.length||Array.prototype.push.call(n,0),e(--n[n.length-1])}return r}function h(n){function r(r){return Array.prototype.push.call(n,r),e(r)}return r}function y(n){function r(){var r=Array.prototype.pop.call(n);return e(r)}return r}function m(n){function r(){var r=n[n.length-1];return e(r)}return r}function g(n){function r(r){return"undefined"!==console&&console.warn instanceof Function&&(n?console.warn(n,r):console.warn(r)),e(r)}return r}function v(n){function r(r){return"undefined"!==console&&console.log instanceof Function&&(n?console.log(n,r):console.log(r)),e(r)}return r}function w(n){function r(r){var e=this;return new t.Promise(function(t){setTimeout(function(){t.call(e,r)},n)})}return r}function A(n,r,e){function u(n){return u.locked?a.call(this,n):(u.locked=new Date,c.call(this,n))}function i(n){return delete u.locked,n}function l(t){if(!u.locked)return t;var e=new Date-u.locked;if(r>e)return t;delete u.locked;var i="timeout";return n.name&&(i+=" for "+n.name),i+=": "+Math.round(e)+" msec exceeded",o(Error(i))}r||(r=6e4),e||(e=Math.ceil(r/100));var c=t.waterfall([n,i]),a=t.waterfall([w(e),l,u]);return u}function P(n){function r(r,t){function e(n){t(null,n)}return r=Array.prototype.slice.call(arguments),t=r[r.length-1]instanceof Function&&r.pop(),t||(t=k),n.apply(this,r).then(e,t)}return n instanceof Function||(n=t(n)),r}function b(n){function r(r){var e=this;return r=Array.prototype.slice.call(arguments),new t.Promise(function(t,o){function u(n,r){return n?o(n):t(r)}r.push(u),n.apply(e,r)})}return r}function k(){}n&&(n.exports=t),!n&&r&&(r.promisen=t);var F="undefined"==typeof Promise&&"undefined"!=typeof require;t.Promise=F?require("es6-promise").Promise:Promise,t.waterfall=u,t.series=i,t.parallel=l,t.each=s,t.eachSeries=f,t.IF=t["if"]=c,t.WHILE=t["while"]=a,t.incr=p,t.decr=d,t.push=h,t.pop=y,t.top=m,t.log=v,t.warn=g,t.wait=w,t.single=A,t.nodeify=P,t.denodeify=b}("undefined"!=typeof module&&module,"undefined"!=typeof window&&window);