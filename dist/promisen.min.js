!function(n,t){function r(n){function t(){return r.Promise.resolve(n)}function o(t){return r.Promise.resolve(n.call(this,t))}return arguments.length>1?u(arguments):n instanceof Function?o:arguments.length?t:e}function e(n){return r.Promise.resolve(n)}function u(n){function t(t){return n.reduce(o.bind(this),e(t))}function u(n){return r(n)}function o(n,t){return n.then(t.bind(this))}return null===n?r(n):null==n?r():(n=Array.prototype.map.call(n,u),t)}function o(n){function t(n){return u([y(e),n,m(o)])}if(null==n)return r([]);var e=[],o=[];return n=Array.prototype.map.call(n,t),n=u(n),u([m(e),n,o])}function i(n){function t(t){var e=Array.prototype.map.call(n,u.bind(this,t));return r.Promise.all(e)}function e(n){return r(n)}function u(n,t){return t.call(this,n)}return null==n?r([]):(n=Array.prototype.map.call(n,e),t)}function c(n,t,e){function u(r){function u(n){return n?i():c()}var o=n.bind(this,r),i=t.bind(this,r),c=e.bind(this,r);return o().then(u)}return n=null!=n?r(n):r(),t=null!=t?r(t):r(),e=null!=e?r(e):r(),u}function l(n,t){function r(n){return o.call(this,n)}var e=Array.prototype.slice.call(arguments,1);e.push(r),t=u(e);var o=c(n,t);return o}function a(n,t){function e(n){return n=Array.prototype.map.call(n,i),o(n).call(this)}function i(n){function r(){return t.call(this,n)}return r}return null==n&&(n=r()),t=r(t),u([n,e])}function f(n,t){function e(n){return n=Array.prototype.map.call(n,o),i(n).call(this)}function o(n){function r(){return t.call(this,n)}return r}return null==n&&(n=r()),t=r(t),u([n,e])}function s(n){function t(){return n.length||Array.prototype.push.call(n,0),e(++n[n.length-1])}return t}function p(n){function t(){return n.length||Array.prototype.push.call(n,0),e(--n[n.length-1])}return t}function m(n){function t(t){return Array.prototype.push.call(n,t),e(t)}return t}function h(n){function t(){var t=Array.prototype.pop.call(n);return e(t)}return t}function y(n){function t(){var t=n[n.length-1];return e(t)}return t}function d(n){function t(t){return"undefined"!==console&&console.warn instanceof Function&&(n?console.warn(n,t):console.warn(t)),e(t)}return t}function g(n){function t(t){return"undefined"!==console&&console.log instanceof Function&&(n?console.log(n,t):console.log(t)),e(t)}return t}function v(n){function t(t){var e=this;return new r.Promise(function(r){setTimeout(function(){r.call(e,t)},n)})}return t}function w(n,t,e){function u(t){var u=this,a=arguments,f=r.Promise,s=++l;return new f(function(t,r){function l(){h&&clearTimeout(h),c[s]=!0,n.apply(u,a).then(p,m)}function f(){m(new Error("timeout: "+e+"ms"))}function p(n){delete c[s],setTimeout(o,0),t(n)}function m(n){delete c[s],setTimeout(o,0),r(n)}i.push(l);var h=e&&setTimeout(f,e);o()})}function o(){if(!(Object.keys(c).length>=t)){var n=i.pop();n&&n()}}t||(t=1),n=r(n);var i=u.queue=[],c=u.running={},l=0;return u}function A(n,t){function e(e){var u=this,o=arguments,i=r.Promise;return new i(function(r,e){function i(){var n=e;r=e=F,n(new Error("timeout: "+t+"ms"))}function c(n){clearTimeout(a),r(n)}function l(n){clearTimeout(a),e(n)}var a=setTimeout(i,t);n.apply(u,o).then(c,l)})}return n=r(n),e}function P(n){function t(t,r){function e(n){r(null,n)}return t=Array.prototype.slice.call(arguments),r=t[t.length-1]instanceof Function&&t.pop(),r||(r=F),n.apply(this,t).then(e,r)}return n instanceof Function||(n=r(n)),t}function b(n){function t(t){var e=this;return t=Array.prototype.slice.call(arguments),new r.Promise(function(r,u){function o(n,t){return n?u(n):r(t)}t.push(o),n.apply(e,t)})}return t}function T(n,t,r){function o(o){function l(r){function l(n){return t&&(c[r]=new Date-0+t),n=i[r]=e(n)}return r in c&&c[r]<new Date&&(delete c[r],delete i[r]),r in i?i[r]:u([n,l]).call(this,o)}return u([r,l]).call(this,o)}var i=o.memo={};t-=0;var c={};return r||(r=JSON.stringify.bind(JSON)),o}function F(){}n&&(n.exports=r),!n&&t&&(t.promisen=r);var q="undefined"==typeof Promise&&"undefined"!=typeof require;r.Promise=q?require("es6-promise").Promise:Promise,r.waterfall=u,r.series=o,r.parallel=i,r.each=f,r.eachSeries=a,r.IF=r["if"]=c,r.WHILE=r["while"]=l,r.incr=s,r.decr=p,r.push=m,r.pop=h,r.top=y,r.log=g,r.warn=d,r.wait=v,r.throttle=w,r.timeout=A,r.nodeify=P,r.denodeify=b,r.memoize=T}("undefined"!=typeof module&&module,"undefined"!=typeof window&&window);